/* =========================
   APP.CSS — BASE + HEADER FIJO (GLOBAL)
   ========================= */

/* ---- Variables base ---- */
:root{
  --nav-h: 64px;

  /* Colores base */
  --primary-color:#60a862;
  --primary-dark:#256d1b;
  --primary-header:#0f2419;
  --primary-red:#e74c3c;
  --text-dark:#333;
  --white:#fff;

  /* Tipografía global responsiva (escala compacta) */
  --fs-body: clamp(15px, 0.35vw + 13px, 16px);
  --fs-sm:   clamp(13px, 0.28vw + 11px, 14px);
  --fs-xs:   clamp(12px, 0.22vw + 10px, 13px);

  --fs-h1: clamp(28px, 1.70vw + 16px, 32px);
  --fs-h2: clamp(24px, 1.35vw + 14px, 28px);
  --fs-h3: clamp(20px, 1.05vw + 12px, 24px);
  --fs-h4: clamp(18px, 0.85vw + 11px, 20px);
  --fs-h5: clamp(16px, 0.65vw + 10px, 18px);
  --fs-h6: clamp(15px, 0.55vw + 10px, 16px); /* mantenemos variable por compatibilidad */

  --lh-tight: 1.2;
  --lh-normal: 1.45;
  --lh-relaxed: 1.6;

  /* separación inicial debajo del header fijo */
  --content-top-gap: clamp(12px, 2.5vh, 28px);

  /* Tamaños objetivo del modal de escritorio */
  --modal-desktop-max-w: 1120px;
  --modal-desktop-side-gap: 48px;
  --modal-desktop-bottom-gap: 24px;

  /* Utilidades globales */
  --border-radius: 15px;
}

/* ---- Reset y fixes globales ---- */
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow-x: clip;
  overflow-y: auto;
  -webkit-text-size-adjust:100%;
  background:#fff;
  color:var(--text-dark);
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}
body{ font-size: var(--fs-body); line-height: var(--lh-normal); }

/* Titulares */
h1{ font-size: var(--fs-h1); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }
h2{ font-size: var(--fs-h2); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }
h3{ font-size: var(--fs-h3); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }
h4{ font-size: var(--fs-h4); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }
h5{ font-size: var(--fs-h5); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }
/* Eliminamos efectivamente h6: lo igualamos a xs para evitar saltos en cualquier parte del sitio */
h6{ font-size: var(--fs-xs); line-height: var(--lh-tight); font-weight:700; margin:0 0 .5em; }

/* Modales (tipografía mínima, sin tocar títulos de cards del modal) */
.modal .modal-title{ font-size: var(--fs-h4); line-height: var(--lh-tight); font-weight: 700; }
.modal .modal-body{ font-size: var(--fs-body); }
.modal .modal-footer .btn{ font-size: var(--fs-sm); }

/* Botones */
.btn, .btn-sm, .btn-lg{ line-height: 1.1; }
.btn{ font-size: var(--fs-sm); }
@media (min-width: 992px){
  .btn{ font-size: var(--fs-body); }
}

/* Ajustes mobile tipográficos */
@media (max-width: 575.98px){
  .modal .modal-title{ font-size: var(--fs-h5); }
  .modal .modal-footer .btn{ font-size: var(--fs-sm); }
}

/* Offset bajo header */
[id]{ scroll-margin-top: calc(var(--nav-h) + 12px); }
body.has-fixed-navbar{ padding-top: var(--nav-h); }
@supports (padding-top: env(safe-area-inset-top)){
  body.has-fixed-navbar{ padding-top: calc(var(--nav-h) + env(safe-area-inset-top)); }
}

/* =========================
   HEADER (Navbar)
   ========================= */
.navbar-custom{
  position:fixed; top:0; left:0; right:0;
  z-index:2000; background-color:#0f2419; color:#fff;
  will-change: transform; transform: translateZ(0); backface-visibility: hidden;
}
.navbar-container{
  max-width:1440px; width:100%; margin:0 auto;
  display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; gap:1rem; padding:.5rem 1rem;
}
.navbar-left{ display:flex; align-items:center; gap:1rem; justify-self:start; }
.navbar-logo{ display:flex; align-items:center; justify-content:flex-start; flex:0 0 auto; justify-self:center; }
.navbar-logo img{ display:block; height:100px; width:auto; }
.navbar-links{ display:flex; justify-content:center; gap:1.25rem; min-width:0; }
.navbar-links a{ color:#fff; text-decoration:none; font-weight:600; font-size: var(--fs-body); }
.navbar-links a:hover{ color:#8bc34a; }

/* Bloque de acciones */
.navbar-actions{
  position: relative;
  display:flex; align-items:center; gap:.6rem; justify-self:end;
}
.navbar-actions i{ font-size:1.2rem; cursor:pointer; }
.navbar-actions i:hover{ transform:scale(1.1); filter:drop-shadow(0 0 5px rgba(96,168,98,.8)); }
.navbar-actions .nav-link,
.navbar-actions i{ padding:.25rem; }

.user-name{ max-width:140px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Menú mobile */
.navbar-toggle{ display:none; background:none; border:0; color:#fff; font-size:1.5rem; cursor:pointer; }
.navbar-links.d-lg-none{
  display:none;
  flex-direction:column;
  align-items:flex-start;
  text-align:left;
  background:#0f2419;
  padding:1rem 1.25rem;
  border-top:1px solid rgba(255,255,255,.12);
}
.navbar-links.d-lg-none a{
  width:100%;
  color:#fff;
  text-decoration:none;
  font-size: var(--fs-sm);
  padding:.55rem 1rem;
  border-bottom:1px solid rgba(255,255,255,.18);
  white-space:normal;
}

/* ====== Header compacto (<=991.98px) ====== */
@media (max-width: 991.98px){
  :root{ --nav-h: 56px; }

  .navbar-container{
    grid-template-columns: auto 1fr auto; /* ☰ | logo | acciones */
    padding:.4rem .75rem;
    gap:.6rem;
  }

  .navbar-toggle{ display:block; min-width:30px; }
  .navbar-logo img{ max-height:56px; height:auto;}

  /* Oculta links horizontales de escritorio */
  .navbar-links:not(.d-lg-none){ display: none !important; }

  /* Dropdown móvil/tablet */
  .navbar-links.d-lg-none{
    position:absolute;
    top:100%;
    left:0; right:0;
    width:100%;
    max-height: calc(100dvh - var(--nav-h));
    overflow:auto;
    z-index:2050;

    pointer-events:none;
    opacity:0;
    transform: translateY(-6px);
    transition: opacity .18s ease, transform .18s ease;
  }
  .navbar-links.d-lg-none.show{
    display:flex;
    pointer-events:auto;
    opacity:1;
    transform: translateY(0);
  }

  .navbar-actions{ gap:.8rem; }
  .navbar-actions .nav-link,
  .navbar-actions i { font-size:1.10rem; line-height:1; }

  .navbar-actions .nav-link + .nav-link,
  .navbar-actions i + i,
  .navbar-actions .nav-link + i,
  .navbar-actions i + .nav-link{ margin-inline-start:.25rem; }
}

/* Evitar scroll de fondo con menú abierto */
body.menu-open{
  overflow:hidden;
  overscroll-behavior: contain;
  touch-action: manipulation;
}

/* ====== Escritorio (>= 992px) ====== */
@media (min-width: 992px){
  .navbar-logo{ justify-self:start; }
  .navbar-links{ display:flex; justify-self:center; }
  .navbar-actions{ justify-self: end; }
}

/* =========================
   MODALES sobre navbar fijo
   ========================= */

.modal-backdrop { z-index: 2100 !important; }
.modal           { z-index: 2110 !important; }

.modal-dialog-centered{ margin-top: max(12px, calc(var(--nav-h) + 12px)) !important; }

/* ---- Modal fix-top base ---- */
.modal.modal-fix-top .modal-dialog{
  margin: calc(var(--nav-h) + 12px) auto var(--modal-desktop-bottom-gap) !important;
  width: auto;
  max-width: 100%;
}
.modal.modal-fix-top .modal-content{
  display:flex;
  flex-direction:column;
}
.modal.modal-fix-top .modal-header,
.modal.modal-fix-top .modal-footer{ flex:0 0 auto; }
.modal.modal-fix-top .modal-body{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}

/* ---- Escritorio (>=992px) ---- */
@media (min-width: 992px){
  .modal.modal-fix-top .modal-dialog{
    max-width: min(var(--modal-desktop-max-w), calc(100vw - var(--modal-desktop-side-gap)));
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .modal.modal-fix-top .modal-dialog.modal-xl{
    max-width: min(var(--modal-desktop-max-w), calc(100vw - var(--modal-desktop-side-gap)));
  }
  .modal.modal-fix-top .modal-content{
    max-height: 85vh;
    border-radius: .75rem;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
  }
  .modal.modal-fix-top .modal-dialog.modal-dialog-centered{
    align-items:flex-start;
    margin-top: calc(var(--nav-h) + 12px) !important;
    margin-bottom: var(--modal-desktop-bottom-gap) !important;
  }
}

/* ---- Compatibilidad scrollable ---- */
@supports (height: 100dvh){
  .modal.modal-fix-top .modal-dialog.modal-dialog-scrollable .modal-content{
    max-height: calc(100dvh - (var(--nav-h) + 24px));
  }
}
@supports not (height: 100dvh){
  .modal.modal-fix-top .modal-dialog.modal-dialog-scrollable .modal-content{
    max-height: calc(100vh - (var(--nav-h) + 24px));
  }
}

/* ---- Mobile fullscreen (<=576.98px) ---- */
@media (max-width: 576.98px){
  .modal.modal-fix-top .modal-dialog{
    margin: 0 !important;
    width: 100%;
    max-width: 100%;
  }
  .modal.modal-fix-top .modal-content{
    height: 100dvh;
    max-height: 100dvh;
    border-radius: 0;
  }
  .modal.modal-fix-top .modal-header{ padding:.75rem 1rem; }
  .modal.modal-fix-top .modal-body{ padding:.85rem 1rem; }
  .modal.modal-fix-top .modal-footer{ padding:.6rem 1rem; }
}

/* iOS notch / safe-area */
@supports (padding: max(0px)){
  .modal.modal-fix-top .modal-content{
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

/* Modal confirmación */
#confirmTourModal .modal-title{ font-size: var(--fs-h5); }
#confirmTourModal .modal-body{ font-size: var(--fs-body); }
#confirmTourModal .btn{ font-size: var(--fs-sm); }

/* =========================
   NAVBAR: ajustes
   ========================= */
.navbar-actions .nav-link,
.navbar-actions i { font-size: 1.05rem; line-height: 1; }
.language-switcher-toggle { font-size: var(--fs-xs); padding: .28rem .45rem;}
.navbar-custom .dropdown-menu { padding: .35rem 0; }
.navbar-custom .dropdown-item{ font-size: var(--fs-sm); padding: .45rem .85rem; line-height: 1.15; }
.navbar-custom .dropdown-item .fa,
.navbar-custom .dropdown-item i { font-size: .95em; }

@media (max-width: 576.98px){
  .navbar-actions{ gap:.9rem; }
  .navbar-actions .nav-link,
  .navbar-actions i { font-size: 1.15rem; }
  .navbar-links.d-lg-none a{ font-size: var(--fs-sm); padding: .45rem 0; }
  .navbar-toggle { font-size: 1.35rem; }

  .navbar-actions .nav-link + .nav-link,
  .navbar-actions i + i,
  .navbar-actions .nav-link + i,
  .navbar-actions i + .nav-link{ margin-inline-start:.3rem; }
}

/* =========================
   CART DROPDOWN
   ========================= */
.navbar-custom .navbar-actions .dropdown-menu{
  position: absolute !important;
  top: calc(100% + 0.25rem) !important;
  right: .5rem !important;
  left: auto !important;
  margin-top: 0 !important;
  transform: none !important;
  transform-origin: top right;
  z-index: 2105 !important;
  width: min(92vw, 360px);
  max-width: 92vw;
  max-height: min(70vh, 560px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: .6rem;
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
}
.navbar-custom .navbar-actions .dropdown-menu.cart-dropdown{
  right: .5rem !important;
  left: auto !important;
}
.navbar-custom .navbar-actions .dropdown-menu.dropdown-menu-end{
  right: .5rem !important;
  left: auto !important;
  transform: none !important;
  transform-origin: top right;
}
@media (min-width: 992px){
  .navbar-custom .navbar-actions .dropdown-menu{
    width: min(420px, 42vw);
    max-width: 420px;
    max-height: 70vh;
  }
}
.navbar-custom .navbar-actions .dropdown-menu .dropdown-body,
.navbar-custom .navbar-actions .dropdown-menu > .p-4{
  max-width: 100%;
  overflow-wrap: anywhere;
}

/* =========================
   CART BADGE
   ========================= */
.navbar-custom .cart-count-badge {
  font-size: 10px; line-height: 1; padding: 2px 6px;
  min-width: 1.1rem; height: 1.1rem; display: inline-flex; align-items: center; justify-content: center;
  border: 2px solid #0f2419;
  box-shadow: 0 0 0 1px rgba(255,255,255,.15), 0 2px 6px rgba(0,0,0,.25);
  transform: translate(-55%, -40%) !important; z-index: 5;
}
@media (max-width: 576.98px){
  .navbar-custom .cart-count-badge {
    font-size: 9px; padding: 1px 5px; min-width: 1rem; height: 1rem; border-width: 1.5px;
    transform: translate(-60%, -40%) !important;
  }
}
@media (min-width: 992px){
  .navbar-custom .cart-count-badge { transform: translate(-50%, -42%) !important; }
}

/* =========================
   LANGUAGE SWITCHER (base)
   ========================= */
.language-switcher-toggle{
  display:inline-flex; align-items:center; gap:.35rem;
  background:transparent; color:#fff !important; border:1.5px solid #fff;
  border-radius:.35rem; padding:.35rem .65rem; font-size:var(--fs-sm); font-weight:550;
  cursor:pointer; transition:all .25s ease;
}
.language-switcher-toggle:hover{ background:rgba(255,255,255,.1); border-color:#256D1B; color:#fff !important; }
.language-switcher-toggle img{ display:inline-block; border-radius:2px; }
.language-switcher .dropdown-menu{ background:#0f2419; border:1px solid rgba(255,255,255,.15); border-radius:.45rem; min-width:150px; padding:.25rem 0; margin-top:.4rem; }
.language-switcher .dropdown-item{ display:flex; align-items:center; gap:.4rem; color:#fff !important; font-size:var(--fs-sm); padding:.45rem .85rem; transition:background .2s ease; }
.language-switcher .dropdown-item img{ border-radius:2px; }
.language-switcher .dropdown-item:hover,
.language-switcher .dropdown-item:focus{ background:#256D1B; color:#fff !important; }
@media (max-width: 576px){
  .language-switcher-toggle{ font-size:var(--fs-xs); padding:.3rem .55rem; }
  .language-switcher .dropdown-item{ font-size:var(--fs-xs); padding:.35rem .75rem; }
}

/* ===== Language switcher compacto (solo mobile) ===== */
@media (max-width: 991.98px){
  .navbar-left{ gap:.45rem; }
  .navbar-left .language-switcher-toggle{
    display:inline-flex; align-items:center; justify-content:center;
    height:28px; padding:.18rem .38rem; gap:.3rem;
    border-width:1.25px; border-radius:.35rem;
    font-size:10px; line-height:1;
  }
  .navbar-left .language-switcher-toggle .label,
  .navbar-left .language-switcher-toggle .code,
  .navbar-left .language-switcher-toggle .text,
  .navbar-left .language-switcher-toggle span{ display:none !important; }
  .navbar-left .language-switcher-toggle img{
    width:18px; height:12px; display:block; border-radius:2px;
  }
  .navbar-custom .language-switcher .dropdown-menu{ z-index:2105; min-width:140px; }
}

/* =========================
   GAP BAJO NAVBAR FIJO
   ========================= */
body.has-fixed-navbar .page-first,
body.has-fixed-navbar main > .big-title:first-child,
body.has-fixed-navbar .content > .big-title:first-child,
body.has-fixed-navbar .container > .big-title:first-child{
  margin-top: calc(var(--content-top-gap) + env(safe-area-inset-top, 0px));
}

/* =========================
   COOKIE BANNER
   ========================= */
.cookie-banner{
  position:fixed; left:0; right:0; bottom:0; z-index:2147483000;
  background:#0f5132; color:#fff; padding:14px 16px; box-shadow:0 -6px 24px rgba(0,0,0,.18);
  font-size:.95rem;
}
.cookie-banner a{ color:#fff; text-decoration:underline; }
.cookie-banner .container{
  max-width:1100px; margin:0 auto; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
}
.cookie-banner .copy{ flex:1 1 420px; }
.cookie-banner .actions{ display:flex; gap:8px; flex-wrap:wrap; }
.cookie-banner .btn{
  cursor:pointer; padding:10px 14px; border-radius:8px; font-weight:600;
  border:2px solid transparent; background-clip:padding-box; transition:border-color .15s ease, box-shadow .15s ease;
}
.cookie-accept{ background:#34c759; color:#0b2e13; }
.cookie-reject{ background:#6c757d; color:#fff; }
.cookie-more{ background:transparent; color:#fff; text-decoration:underline; padding:0 4px; }
.cookie-banner .btn:hover,
.cookie-banner .btn:focus-visible{ border-color:#ffffff; box-shadow:0 0 0 2px rgba(255,255,255,.35) inset; }
@media (prefers-reduced-motion: no-preference){
  .cookie-banner{ animation:slideUp .25s ease-out; }
  @keyframes slideUp{ from{ transform:translateY(100%); } to{ transform:translateY(0); } }
}
@media (max-width: 576.98px){
  :root{ --content-top-gap: clamp(10px, 2vh, 20px); }
}

/* -------------------------
   Genéricos de modal
   ------------------------- */
.modal .modal-header .modal-title{
  white-space:normal; line-height:1.3; text-align:center; width:100%;
}

/* =========================
   FOOTER GLOBAL — (trasladado desde home.css)
   ========================= */
.footer-nature{
  background:#0f2419;
  color:#fff;
  padding:3.5rem 2rem;
  font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}
.footer-nature .footer-main-content{
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  gap:2rem;
  max-width:1200px;
  margin:auto;
}
.footer-nature .footer-brand img{
  width:190px;
  margin-bottom:1rem;
}
.footer-nature .footer-brand p{
  font-size:var(--fs-body);
  line-height:1.6;
  color:#f0f0f0;
}
.footer-nature .footer-links,
.footer-nature .contact-info{
  flex:1;
  min-width:220px;
}
.footer-nature .footer-links h4,
.footer-nature .contact-info h4{
  font-size: var(--fs-h6);
  font-weight:700;
  margin-bottom:1rem;
  color:#fff;
  text-transform:uppercase;
}
.footer-nature .footer-links ul{
  list-style:none;
  padding:0;
  margin:0;
}
.footer-nature .footer-links li{
  margin-bottom:10px;
}
.footer-nature .footer-links a{
  color:#e0e0e0;
  text-decoration:none;
  font-size: var(--fs-body);
  transition:color .3s;
}
.footer-nature .footer-links a:hover{
  color:#a7f3d0;
}
.footer-nature .contact-info p{
  font-size:var(--fs-body);
  margin-bottom:.5rem;
  color:#f0f0f0;
}
.footer-nature .footer-bottom{
  text-align:center;
  margin-top:2rem;
  font-size:var(--fs-sm);
  color:#ccc;
}
.footer-tours{
  flex:1;
  min-width:220px;
}
.footer-tours h4{
  font-size: var(--fs-h6);
  font-weight:700;
  margin-bottom:1rem;
  color:#fff;
  text-transform:uppercase;
}
.footer-tours ul{
  list-style:none;
  padding:0;
  margin:0;
}
.footer-tours li{
  margin-bottom:10px;
}
.footer-tours a{
  color:#e0e0e0;
  font-size: var(--fs-body);
  text-decoration:none;
  transition:color .3s ease;
}
.footer-tours a:hover{
  color:#a7f3d0;
  text-decoration:underline;
}
.footer-tours i{
  min-width:20px;
}

/* Responsive footer */
@media (max-width: 767.98px){
  .footer-nature{
    padding:2.5rem 1.5rem;
  }
  .footer-nature .footer-main-content{
    flex-direction:column;
    align-items:flex-start;
    gap:2rem;
  }
  .footer-nature .footer-brand{
    text-align:center;
    width:100%;
  }
  .footer-nature .footer-brand img{
    margin-left:auto;
    margin-right:auto;
  }
  .footer-nature .footer-bottom{
    margin-top:1.5rem;
    font-size:var(--fs-xs);
  }
}

/* Modo oscuro opcional para el footer (respetando tu paleta) */
@media (prefers-color-scheme: dark){
  .footer-nature{ background:#0c1b14; }
  .footer-nature .footer-brand p,
  .footer-nature .contact-info p{ color:#e6eee9; }
  .footer-nature .footer-links a,
  .footer-tours a{ color:#d7e6dc; }
  .footer-nature .footer-links a:hover,
  .footer-tours a:hover{ color:#b6f0cf; }
  .footer-nature .footer-bottom{ color:#bbbbbb; }
}

/* ---------- WHATSAPP (widget/panel) ---------- */
.whatsapp-panel{
  position:fixed; bottom:6rem; right:1.5rem; width:300px;
  background:#fff; border:1px solid #e2e2e2; border-radius:1rem;
  box-shadow:0 8px 20px rgba(0,0,0,.15); overflow:hidden; z-index:1050;
}
.whatsapp-header{
  background:linear-gradient(to right, #0d4740, #083d3a);
  color:#fff; padding:1rem; display:flex; justify-content:space-between; align-items:center;
  border-top-left-radius:1rem; border-top-right-radius:1rem;
}
.whatsapp-icon-circle{ width:40px; height:40px; background-color:rgba(255,255,255,.2);
  border-radius:50%; display:flex; align-items:center; justify-content:center; }
.whatsapp-greeting{ background:#f8f9fa; padding:.75rem; border-radius:.5rem; margin-bottom:1rem; }
.whatsapp-footer-note{ font-size:11px; }
.whatsapp-float-btn{
  position:fixed; bottom:1.5rem; right:1.5rem; width:60px; height:60px;
  background:linear-gradient(to right, #0d4740, #083d3a);
  color:#fff; border-radius:50%; box-shadow:0 4px 15px rgba(0,0,0,.25);
  border:none; display:flex; align-items:center; justify-content:center; transition:all .3s ease; z-index:1040;
}
.whatsapp-float-btn:hover{ transform:scale(1.05); background:linear-gradient(to right, #14665e, #052a28); }
@keyframes pulse-grow{ 0%{transform:scale(1);} 50%{transform:scale(1.15);} 100%{transform:scale(1);} }
.animate-pulse-grow{ animation:pulse-grow 1.2s ease-in-out infinite; }
