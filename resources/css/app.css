/* =========================
   APP.CSS — BASE + HEADER FIJO (GLOBAL)
   ========================= */

/* ---- Variables base ---- */
:root{
  --nav-h: 64px; /* altura del header; sube si tu logo es más alto */

  /* Colores base */
  --primary-color:#60a862;
  --primary-dark:#256d1b;
  --text-dark:#333;
  --white:#fff;

  /* ===== Tipografía global responsiva ===== */
  --fs-body: clamp(14px, 0.40vw + 12px, 16px);
  --fs-sm:   clamp(12px, 0.30vw + 10px, 14px);
  --fs-xs:   clamp(11px, 0.20vw +  9px, 12px);

  --fs-h1: clamp(28px, 2.20vw + 18px, 40px);
  --fs-h2: clamp(24px, 1.80vw + 16px, 32px);
  --fs-h3: clamp(20px, 1.40vw + 14px, 26px);
  --fs-h4: clamp(18px, 1.10vw + 13px, 22px);
  --fs-h5: clamp(16px, 0.90vw + 12px, 18px);
  --fs-h6: clamp(14px, 0.70vw + 11px, 16px);

  --lh-tight: 1.2;
  --lh-normal: 1.45;
  --lh-relaxed: 1.6;
}

/* ---- Reset y fixes globales ---- */
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow-x: clip;
  overflow-y: auto;
  -webkit-text-size-adjust:100%;
  background:#fff;
  color:var(--text-dark);
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}
body{ font-size: var(--fs-body); line-height: var(--lh-normal); }

/* Titulares */
h1{ font-size: var(--fs-h1); line-height: var(--lh-tight); }
h2{ font-size: var(--fs-h2); line-height: var(--lh-tight); }
h3{ font-size: var(--fs-h3); line-height: var(--lh-tight); }
h4{ font-size: var(--fs-h4); line-height: var(--lh-tight); }
h5{ font-size: var(--fs-h5); line-height: var(--lh-tight); }
h6{ font-size: var(--fs-h6); line-height: var(--lh-tight); }

/* Modales */
.modal .modal-title{
  font-size: var(--fs-h4);
  line-height: var(--lh-tight);
  font-weight: 700;
}
.modal .modal-body{ font-size: var(--fs-body); }
.modal .modal-footer .btn{ font-size: var(--fs-sm); }

/* Cards */
.card .card-title,
.tour-modal-card .card-title-text{
  font-size: var(--fs-h5);
  line-height: var(--lh-tight);
  font-weight: 700;
}
.card .card-text,
.tour-modal-card .card-body{ font-size: var(--fs-body); }
.small{ font-size: var(--fs-sm); line-height: var(--lh-relaxed); }

/* Botones */
.btn, .btn-sm, .btn-lg{ line-height: 1.1; }
.btn{ font-size: var(--fs-sm); }
@media (min-width: 992px){
  .btn{ font-size: var(--fs-body); }
}

/* Ajustes mobile */
@media (max-width: 575.98px){
  .modal .modal-title{ font-size: var(--fs-h5); }
  .card .card-title,
  .tour-modal-card .card-title-text{ font-size: var(--fs-h6); }
  .modal .modal-footer .btn{ font-size: var(--fs-sm); }
}

/* Offset bajo header */
[id]{ scroll-margin-top: calc(var(--nav-h) + 12px); }
body.has-fixed-navbar{ padding-top: var(--nav-h); }
@supports (padding-top: env(safe-area-inset-top)){
  body.has-fixed-navbar{
    padding-top: calc(var(--nav-h) + env(safe-area-inset-top));
  }
}

/* =========================
   HEADER (Navbar)
   ========================= */
.navbar-custom{
  position:fixed;
  top:0; left:0; right:0;
  z-index:2000;
  background-color:#0f2419;
  color:#fff;
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}
.navbar-container{
  max-width:1440px;
  width:100%;
  margin:0 auto;
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:1rem;
  padding:.5rem 1rem;
}
.navbar-left{ display:flex; align-items:center; gap:1rem; justify-self:start; }
.navbar-logo{ display:flex; align-items:center; justify-content:flex-start; flex:0 0 auto; justify-self:center; }
.navbar-logo img{ display:block; height:100px; width:auto; }
.navbar-links{ display:flex; justify-content:center; gap:1.25rem; min-width:0; }
.navbar-links a{ color:#fff; text-decoration:none; font-weight:500; }
.navbar-links a:hover{ color:#8bc34a; }
.navbar-actions{ display:flex; align-items:center; gap:1.5rem; justify-self:end; }
.navbar-actions i{ font-size:1.2rem; cursor:pointer; }
.navbar-actions i:hover{ transform:scale(1.1); filter:drop-shadow(0 0 5px rgba(96,168,98,.8)); }
.user-name{ max-width:140px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Menú mobile */
.navbar-toggle{ display:none; background:none; border:0; color:#fff; font-size:1.5rem; cursor:pointer; }
.navbar-links.d-md-none{
  display:none; flex-direction:column; align-items:flex-start; text-align:left;
  background:#0f2419; padding:1rem 1.25rem; border-top:1px solid rgba(255,255,255,.12);
}
.navbar-links.d-md-none.show{ display:flex; }
.navbar-links.d-md-none a{
  width:100%; color:#fff; text-decoration:none; font-size:.95rem; padding:.5rem 0;
  border-bottom:1px solid rgba(255,255,255,.18);
}

@media (max-width:768px){
  .navbar-toggle{ display:block; min-width:30px; }
  .navbar-actions{ gap:.6rem; }
  .navbar-logo img{ max-height:65px; height:auto; }
  .navbar-container{ padding:.4rem .6rem; }
}
@media (min-width:768px){
  .navbar-logo{ justify-self:start; }
  .navbar-links{ justify-self:center; }
  .navbar-actions{ justify-self:end; }
}

/* =========================
   MODALES sobre navbar fijo
   ========================= */
.modal-backdrop { z-index: 2100 !important; }
.modal           { z-index: 2110 !important; }
.modal-dialog-centered{ margin-top: max(12px, calc(var(--nav-h) + 12px)) !important; }

/* Modal confirmación */
#confirmTourModal .modal-title{ font-size: var(--fs-h5); }
#confirmTourModal .modal-body{ font-size: var(--fs-body); }
#confirmTourModal .btn{ font-size: var(--fs-sm); }

/* =========================
   NAVBAR ajustes compactos
   ========================= */
.navbar-actions { gap: .6rem; }
.navbar-actions .nav-link,
.navbar-actions i { font-size: 1.05rem; line-height: 1; }
.language-switcher-toggle { font-size: var(--fs-xs); padding: .28rem .45rem;}
.navbar-custom .dropdown-menu { padding: .35rem 0; }
.navbar-custom .dropdown-item{
  font-size: var(--fs-sm);
  padding: .45rem .85rem;
  line-height: 1.15;
}
.navbar-custom .dropdown-item .fa,
.navbar-custom .dropdown-item i { font-size: .95em; }
@media (max-width: 576.98px){
  .navbar-actions { gap: .4rem; }
  .navbar-actions .nav-link,
  .navbar-actions i { font-size: .95rem; }
  .navbar-links.d-md-none a{ font-size: var(--fs-sm); padding: .45rem 0; }
  .navbar-toggle { font-size: 1.35rem; }
}

/* =========================
   CART BADGE (contador carrito)
   ========================= */
.navbar-custom .cart-count-badge {
  font-size: 10px;
  line-height: 1;
  padding: 2px 6px;
  min-width: 1.1rem;
  height: 1.1rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid #0f2419;
  box-shadow: 0 0 0 1px rgba(255,255,255,.15), 0 2px 6px rgba(0,0,0,.25);
  transform: translate(-55%, -40%) !important;
  z-index: 5;
}
@media (max-width: 576.98px){
  .navbar-custom .cart-count-badge {
    font-size: 9px;
    padding: 1px 5px;
    min-width: 1rem;
    height: 1rem;
    border-width: 1.5px;
    transform: translate(-60%, -40%) !important;
  }
}
@media (min-width: 992px){
  .navbar-custom .cart-count-badge {
    transform: translate(-50%, -42%) !important;
  }
}

/* =========================
   LANGUAGE SWITCHER
   ========================= */
.language-switcher-toggle {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  background: transparent;           /* fondo transparente */
  color: #fff !important;
  border: 1.5px solid #fff;          /* borde blanco */
  border-radius: .35rem;
  padding: .35rem .65rem;
  font-size: var(--fs-sm);
  font-weight: 600;
  cursor: pointer;
  transition: all .25s ease;
}
.language-switcher-toggle:hover {
  background: rgba(255,255,255,.1);  /* leve fondo al hover */
  border-color: #8bc34a;
  color: #fff !important;
}
.language-switcher-toggle img {
  display: inline-block;
  border-radius: 2px;
}

/* Dropdown del switcher (no afecta otros menús) */
.language-switcher .dropdown-menu {
  background: #0f2419;
  border: 1px solid rgba(255,255,255,.15);
  border-radius: .45rem;
  min-width: 150px;
  padding: .25rem 0;
  margin-top: .4rem;
}
.language-switcher .dropdown-item {
  display: flex;
  align-items: center;
  gap: .4rem;
  color: #fff !important;
  font-size: var(--fs-sm);
  padding: .45rem .85rem;
  transition: background .2s ease;
}
.language-switcher .dropdown-item img {
  border-radius: 2px;
}
.language-switcher .dropdown-item:hover,
.language-switcher .dropdown-item:focus {
  background: #8bc34a;
  color: #fff !important;
}

/* Mobile optimización */
@media (max-width: 576px) {
  .language-switcher-toggle {
    font-size: var(--fs-xs);
    padding: .3rem .55rem;
  }
  .language-switcher .dropdown-item {
    font-size: var(--fs-xs);
    padding: .35rem .75rem;
  }
}

/* =========================
   GAP BAJO NAVBAR FIJO (primer elemento + notch safe)
   ========================= */
:root{
  /* separación inicial debajo del header fijo */
  --content-top-gap: clamp(12px, 2.5vh, 28px);
}

body.has-fixed-navbar .page-first,
body.has-fixed-navbar main > .big-title:first-child,
body.has-fixed-navbar .content > .big-title:first-child,
body.has-fixed-navbar .container > .big-title:first-child {
  margin-top: calc(var(--content-top-gap) + env(safe-area-inset-top, 0px));
}

@media (max-width: 576.98px){
  :root{
    --content-top-gap: clamp(10px, 2vh, 20px);
  }
}
