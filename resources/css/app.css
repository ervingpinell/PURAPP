/* =========================
   APP.CSS — BASE + HEADER FIJO (GLOBAL)
   ========================= */

/* ---- Variables base ---- */
:root{
  /* altura del header; JS la actualizará dinámicamente */
  --nav-h: 64px;

  /* colores base compartidos */
  --primary-color:#60a862;
  --primary-dark:#256d1b;
  --text-dark:#333;
  --white:#fff;
}

/* ---- Reset y fixes globales ---- */
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow-x: clip;
  overflow-y: auto;
  -webkit-text-size-adjust:100%;
  background:#fff;
  color:var(--text-dark);
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

/* Que el header fijo no tape las anclas */
[id]{
  scroll-margin-top: calc(var(--nav-h) + 12px);
}

/* Offset automático bajo el header fijo */
body.has-fixed-navbar{
  padding-top: var(--nav-h);
}
@supports (padding-top: env(safe-area-inset-top)){
  body.has-fixed-navbar{
    padding-top: calc(var(--nav-h) + env(safe-area-inset-top));
  }
}

/* Cuando el menú mobile está abierto (opcional, para bloquear scroll de fondo) */
body.menu-open{ overflow: hidden; }

/* =========================
   HEADER (Navbar)
   ========================= */
.navbar-custom{
  position:fixed;
  top:0; left:0; right:0;
  z-index:2000;                      /* por encima de carruseles/iframes */
  background-color:#0f2419;
  color:#fff;
  will-change: transform;            /* evita “parpadeo” en algunos móviles */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Contenedor interno: grid en todas las vistas
   Mobile: [hamb] [logo] [actions]  -> logo centrado
   Desktop: [logo] [links] [actions] -> links centrados */
.navbar-container{
  max-width:1440px;
  width:100%;
  margin:0 auto;
  display:grid;
  grid-template-columns: 1fr auto 1fr; /* columnas laterales simétricas */
  align-items:center;
  gap:1rem;
  padding:.5rem 1rem;
}

/* Bloque hamburguesa (solo mobile) */
.navbar-left{
  display:flex;
  align-items:center;
  gap:1rem;
  justify-self:start; /* a la izquierda */
}

/* Logo */
.navbar-logo{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  flex:0 0 auto;
  justify-self:center; /* centrado en mobile (y también ok en desktop si no se sobreescribe) */
}
.navbar-logo img{
  display:block;
  height:100px;
  width:auto;
}

/* Links (desktop). En mobile se usan los .d-md-none aparte */
.navbar-links{
  display:flex;
  justify-content:center;            /* links centrados dentro de su bloque */
  gap:1.25rem;
  min-width:0;
}
.navbar-links a{
  color:#fff;
  text-decoration:none;
  font-weight:500;
}
.navbar-links a:hover{ color:#8bc34a; }

/* Acciones (idioma, carrito, user) */
.navbar-actions{
  display:flex;
  align-items:center;
  gap:1.5rem;
  justify-self:end;                  /* pegado a la derecha */
}
.navbar-actions i{ font-size:1.2rem; cursor:pointer; }
.navbar-actions i:hover{
  transform:scale(1.1);
  filter:drop-shadow(0 0 5px rgba(96,168,98,.8));
}

/* Hover en ícono/nombre de usuario */
.nav-link:hover .fa-user-circle,
.nav-link:hover .user-name{
  color:#ffc107;
  transform:scale(1.05);
}

/* Nombre recortado */
.user-name{
  max-width:140px;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

/* Color/animación puntual para el ícono del carrito */
.cart-icon-wrapper:hover i{
  color:#ffc107;
  transform:scale(1.1);
  transition: all .2s ease;
}

/* Toggle (hamburguesa) */
.navbar-toggle{
  display:none;
  background:none;
  border:0;
  color:#fff;
  font-size:1.5rem;
  cursor:pointer;
}

/* Badge del carrito */
.cart-count-badge{
  position:absolute;
  top:-6px;
  background:#dc3545;
  color:#fff;
  font-size:.85rem;
  padding:2px 6px;
  border-radius:50%;
  font-weight:700;
  line-height:1;
  z-index:10;
  display:none;                      /* visible si count > 0 (JS) */
  transition:all .3s ease;
}
.cart-count-badge.flash{ animation: flashBadge .6s ease; }
@keyframes flashBadge{
  0%{ transform:scale(1);   background:#dc3545; }
  50%{ transform:scale(1.3); background:#ff6b6b; }
  100%{ transform:scale(1);  background:#dc3545; }
}

/* =========================
   MENÚ MOBILE (desplegable)
   ========================= */
.navbar-links.d-md-none{
  display:none;
  flex-direction:column;
  align-items:flex-start;            /* izquierda */
  text-align:left;
  background:#0f2419;
  padding:1rem 1.25rem;
  border-top:1px solid rgba(255,255,255,.12);
}
.navbar-links.d-md-none.show{ display:flex; }
.navbar-links.d-md-none a{
  width:100%;
  color:#fff;
  text-decoration:none;
  font-size:.95rem;
  padding:.5rem 0;
  border-bottom:1px solid rgba(255,255,255,.18);
}

/* =========================
   LANGUAGE SWITCHER (header)
   ========================= */
.language-switcher{ position:relative; }
.language-switcher-toggle{
  background:transparent;
  border:1px solid #fff;
  color:#fff;
  padding:.3rem .5rem;
  border-radius:4px;
  display:inline-flex;
  align-items:center;
  gap:.3rem;
  cursor:pointer;
  font-size:.85rem;
  line-height:1;
}
.language-switcher-toggle img{
  width:18px;
  height:auto;
  border-radius:2px;
  display:inline-block;
}
.language-switcher-menu{
  background:#fff;
  border:1px solid #ccc;
  min-width:140px;
}
.language-switcher-item{
  display:flex;
  align-items:center;
  gap:.5rem;
  color:#333;
  padding:.4rem .8rem;
  text-decoration:none;
  font-size:.9rem;
}
.language-switcher-item:hover{ background:#f0f0f0; color:#000; }
.language-switcher-item img{
  width:18px;
  height:auto;
  border-radius:2px;
}

/* =========================
   MISC / HELPERS
   ========================= */
.whatsapp-widget{ position:relative; z-index:9999; } /* z-index global */
.carousel, .carousel-inner, .carousel-item{ transform:translateZ(0); }
.carousel, .carousel *{ backface-visibility:hidden; }
.bg-green-dark{ background-color:#0f2419; }

/* =========================
   RESPONSIVE
   ========================= */
@media (max-width:768px){
  .navbar-toggle{ display:block; min-width:30px; }
  .navbar-actions{ gap:.6rem; }
  .navbar-logo img{ max-height:65px; height:auto; }
  .navbar-container{ padding:.4rem .6rem; }
}

/* ===== Desktop: logo izq, links centrados, actions der ===== */
@media (min-width: 768px){
  .navbar-logo{ justify-self:start; }   /* logo a la izquierda */
  .navbar-links{ justify-self:center; } /* links centrados */
  .navbar-actions{ justify-self:end; }  /* acciones a la derecha */
}
